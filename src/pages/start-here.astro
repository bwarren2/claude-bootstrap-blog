---
import BaseLayout from "@layouts/BaseLayout.astro";
import ProjectCard from "@components/ProjectCard.astro";
import { getCollection } from "astro:content";

const allProjects = await getCollection("projects", ({ data }) => !data.draft);
const orderedProjects = allProjects
  .filter((p) => p.data.readingOrder != null)
  .sort((a, b) => (a.data.readingOrder ?? 0) - (b.data.readingOrder ?? 0));
---

<BaseLayout
  title="Start Here"
  description="A curated reading order for getting started with this blog."
>
  <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-bold text-text-primary mb-2">Start Here</h1>
    <p class="text-lg text-text-secondary mb-8">
      New here? Read these posts in order for the best introduction to
      AI-assisted development with Claude Code.
    </p>

    <div class="space-y-6">
      {
        orderedProjects.map((project, i) => (
          <div class="flex gap-4 items-start">
            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-brand text-white flex items-center justify-center text-sm font-bold">
              {i + 1}
            </div>
            <div class="flex-1">
              <ProjectCard project={project} />
            </div>
          </div>
        ))
      }
    </div>

    {
      orderedProjects.length === 0 && (
        <p class="text-center text-text-secondary py-12">
          No posts in the reading order yet. Check back soon!
        </p>
      )
    }
  </div>
</BaseLayout>
